---
layout: post
title: 🚗TCP/IP 애플리케이션 계층
date: 2020-12-11 14:55:00
author: 'SeWonKim'
categories: [CS, Network]
tags: [CS, Network, TCPIP]
comments: true
description: TCP/IP 쉽게, 더 쉽게 Chapter 2 요약
---

![책](https://image.yes24.com/Goods/32203210/L)

## 요약

- HTTP 프로토콜 설명해보기
- GET과 POST의 차이점
- AJAX
- 쿠키를 사용하는 이유 / 동작 방식 / 보안 이슈
- 이메일 프로토콜 : SMTP / POP / IMAP
- 파일 공유 프로토콜 : P2P / FTP
- 원격 제어 : Talnet / SSH
- 음성 : VoIP
- TCP vs UDP

&nbsp;
&nbsp;

## 🍎애플리케이션 계층의 역할

- 사용자가 직접 사용하는 서비스 제공

### 사용하는 프로토콜 - 사용자가 직접 사용

- 클라이언트와 서버 사이 데이터 전송 : HTTP
- 메일 : POP, SMTP
- LAN에서 파일 공유 : SMB, AFP
- 파일 전송 : FTP
- 원격 제어:  SSH, Telnet


### 사용하는 프로토콜 - 사용자가 간접적으로 사용

- 도메인명과 IP 어드레스를 변환 : DNS
- LAN 내의 컴퓨터에게 IP 어드레스 할당 : DHCP
- 통신 데이터 암호화 : SSL, TLS
- 연결되어있는 장비들의 시스템 시간 동기화 : NTP
- 연결된 장비들의 통합관리에 필요한 디렉터리 서비스 제공 : LDAP

&nbsp;
&nbsp;

## 🍊HTTP

### 웹페이지가 표시되기까지

1. 클라이언트에서 서버에 웹페이지 요청
2. 서버가 HTML을 응답
3. HTML 내용을 확인해서 CSS나 이미지가 필요하면 추가로 전달
4. 응답받은 내용을 브라우저가 조합해서 표시

👉 **이 모든 과정을 HTTP 프로토콜을 사용한다**


&nbsp;

### 요청 URL

`http://www.google.com/sample/index.html`

- http : scheme; 사용하는 프로토콜 명시
- www : host; 서버의 이름/역할을 명시
- google.com : domain
- sample : directory; 서버 내의 디렉토리
- index.html : file; 해당 디렉토리 내의 파일명 

요청정보의 헤더의 Host에 웹 서버 정보가 들어가고, 요청정보가 들어간다.


&nbsp;

### 응답 

1. 상태정보, 상태코드 (404,405 등 등)
2. 헤더 
3. 메시지 바디: 파일 내용


&nbsp;
&nbsp;

## 🍋GET vs POST

서버에 요청할 때 GET과 POST 방식을 자주 사용한다.

|        |                 GET                  |                  POST                  |
| :----: | :----------------------------------: | :------------------------------------: |
|  URL   | '?' 문자 뒤에 입력 폼 내용이 붙는다. | 메시지 바디에 입력 폼 내용이 들어간다. |
| 전송량 |           전송량에 제한 有           |            전송량에 제한 無            |
|  보안  |   전송 데이터가 URL에 그대로 노출    |    내용이 그대로 노출되지는 않는다     |


둘 다 데이터 보안 측면에서는 안전하다고 할 수 없다.      
데이터 암호화가 필요한 경우 HTTPS 프로토콜 사용


&nbsp;
&nbsp;

## 🍓AJAX

기존 웹서비스의 응답 결과 표시 방식 = 웹 페이지 전체를 리렌더링

AJAX = HTTP로 통신하는 것은 동일하지만 JS가 웹 서버와 통신해서 웹페이지의 특정 부분만 갱신

👉 화면 깜빡임 없이도 데이터를 변경할 수 있으므로 UX 향상

&nbsp;
&nbsp;

## 🍪쿠키

- HTTP는 무상태(stateless) 프로토콜
- 통신을 주고받은 후 연결을 끊어버린다.
- 여러 단계의 흐름처리를 할 때 같은 사용자를 인식할 수 있도록 **쿠키**를 사용

&nbsp;


### 동작 방식

1. 처음 접속하는 경우 응답에 쿠키를 보낸다. (세션ID 발급)
2. 응답받은 메세지에 'Set-Cookie:' 라는 문자열을 확인하고, 있으면 클라이언트 PC에 저장한다.
4. 다음 요청부터 쿠키를 함께 보낸다.
5. 서버는 쿠키를 보고 같은 사용자인지 판단한다.


&nbsp;

### 보안을 위한 방어책

- 동일 서버를 사용하는 경우에만 쿠키 전송
- 쿠키 유효기간 설정
- 유출되었을 때 문제가 생길만한 정보는 쿠키에 저장하지 않기

---

&nbsp;
&nbsp;


## 🍇이메일

- 발신 : SMTP(Simple Mail Transfer Protocol)
- 수신 : POP(Post Office Protocol)

&nbsp;

### SMTP

- 클라이언트 PC ▶️ 서버로 메일을 보낼 때 사용
- 발신자 메일 서버 ▶️ 수신자 메일 서버로 중계할 때 사용
- 상태를 가지는 stateful 프로토콜이므로 전송 종료 명령이 보내져야 통신 종료
- 송신자, 수신자, 메일 정보를 순차적으로 전송
- SMTP는 POP처럼 인증이 없기 때문에 인증 기능이 추가된 STMP Auth 프로토콜을 사용하기도 한다.
  
&nbsp;

### POP

- 메일 서버에 저장된 메일을 확인할 때 POP 프로토콜 사용
- 수신 메일 건수, 용량 확인, 메일 삭제 같은 처리도 담당
- 사용자 인증(사용자이름, 비밀번호)을 먼저 한 후, 메일과 관련된 통신 시작

&nbsp;

### IMAP

- POP = 수신 후 서버에 보관된 메일 삭제
- IMAP = 수신 후 메일을 서버에 보관
- 클라이언트에 메일 데이터를 보관하지 않기 때문에 모바일 기기에 적합

&nbsp;
&nbsp;

---

&nbsp;
&nbsp;

## 🍏P2P

- 별도의 서버를 준비하지 않고, 공유할 컴퓨터끼리 네트워크에 접속만 하면 공유 가능
- 접속하면 자신이 연결되었다는 것을 알리고, 네트워크 전체에게 응답을 받아 공유 가능한 컴퓨터를 식별
- OS마다 독자적인 파일공유 프로토콜을 제공. 최근에는 다른 OS의 프로토콜도 지원할 수 있기 됨.

&nbsp;
&nbsp;

## 🥝FTP

- 주로 인터넷에 연결된 서버에 파일을 전송할 때 사용하는 프로토콜
- FTP 서버로 HTML 파일을 전송하고, 이 파일을 웹 서버가 HTTP를 통해 전달받아 서비스하는 것이 가능
- 데이터 커넥션 : 파일을 주고받기 위한 접속
- 컨트롤 커넥션 : FTP 명령을 보내기 위한 접속 👉 접속 형태가 분리되어 있어 전송중인 파일을 중단시키는 것도 가능


---

&nbsp;
&nbsp;

## 🍌원격제어 Telnet / SSH

-  텍스트 형태의 명령을 서버에 보내고 그 응답으로 텍스트 형태의 결과를 받는다.
-  최근에는 보안을 위해 암호화 되는 SSH를 많이 사용(공유키 조합 방식으로 통신 암호화)
  

&nbsp;
&nbsp;

## 🍑Voiceover IP

- 음성이나 동영상을 주고받는 프로토콜
- 텍스트에 비해 데이터 용량이 크기 때문에 통신 신뢰성보다는 전송 속도가 우선시 되는 UDP를 사용
- 전송 시 데이터를 압축 + 수신된 정보 바로 재생이 가능한 스트리밍 기술 사용
- 보통 P2P 방식으로 통신
- **But** 서로 통신할 상대를 찾기 위해 클라이언트-서버 방식으로 상대를 찾은 다음 P2P 방식으로 통신하는 하이브리드 방식도 많이 활용된다.

1. 음성을 작은 데이터로 쪼갠다.
2. 압축해서 순서대로 전송
3. 도착한 순서대로 바로 재생(streaming)

&nbsp;

### TCP vs UDP

- TCP : 통신이 잘 전송 됐는지 응답을 확인하는 프로토콜
- UDP : 통신 전송 여부에 관계없이 데이터를 보내는 프로토콜
  
&nbsp;

### 동영상 공유 서비스의 프로토콜

- 일부 네트워크 환경에서 동영상 처리 프로토콜이 거부될 수 있다.
- HTTP는 차단되는 경우가 거의 없으므로 HTTP 메시지 안에 채워 넣는 기술을 사용

&nbsp;
&nbsp;
